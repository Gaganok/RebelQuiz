<div id="view">
    <style scoped>
        .playground-wrapper {
            display: flex;
            flex-direction: column;
            max-width: 50vh;
            margin: 20vh auto;
            text-align: center;
        }

        .collection-item {
            color: #0d47a1 !important;
        }

        .collection-item:not(.active):hover {
            background-color: #bbdefb !important;
            font-size: 15px;
            transition: font-size 0.1s ease;
        }

        .collection .collection-item.active {  
            background-color: #90cdff !important;
            font-size: 15px;
            transition: font-size 0.1s ease;
        }

        .collection-header {
            color: #424242 !important;
        }

        .collection {
            border-radius: 10px !important;
        }

        .btn-custom {
            background-color: #0d47a1 !important;
            color: #ffffff !important;
            border: none;
            min-width: 150px;
        }
        
        .button-wrapper {
            display: flex;
            justify-content: space-between;
        }
    </style>

    <h2 style="margin-left: 25px; color: #9e9e9e">Playground</h2>
    <div class="playground-wrapper" >
        <ul id="room_list" class="collection with-header" 
            hx-get="/playground/refresh" 
            hx-trigger="every 5s"
            th:insert="fragments/rooms :: rooms"
        ></ul>
        <div class="button-wrapper">
            <a class="waves-effect waves-light btn btn-custom" 
                hx-get="/room/create" 
                hx-target="#view"
                hx-swap="outerHTML"
            >Create Room</a>
            <a class="waves-effect waves-light btn btn-custom" 
                hx-post="/room/join" 
                hx-target="#view"
                hx-vals='js:{roomName: selectedRoomName()}'
                hx-swap="outerHTML"
            >Join</a>
        </div>
    </div>

    <script>
        let selectedRoom = null;

        function selectRoom(e) {
            console.log("room clicked!")

            if(selectedRoom == event.target) {
                //trigger
            } else {
                selectedRoom?.classList.remove("active")
                selectedRoom = event.target
                selectedRoom.classList.add("active")
            }
        }

        function selectedRoomName() {
            return selectedRoom.textContent
        }

        document.addEventListener('htmx:afterRequest', function (e) {
            if (selectedRoom && e.detail.elt.id === 'room_list') {
                const rooms = document.querySelectorAll('.collection-item');
                for (const room of rooms) {
                    if (room.textContent === selectedRoom.textContent) {
                        selectedRoom = room
                        selectedRoom.classList.add("active")
                        break;
                    }
                }
            }
        });

    </script>
</div>